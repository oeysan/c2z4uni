<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create HTML and Metadata Files from Cristin Data for Web Display — CristinWeb • c2z4uni</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create HTML and Metadata Files from Cristin Data for Web Display — CristinWeb"><meta property="og:description" content="This function processes monthly Cristin data to generate HTML content
and metadata files for web display. It uses htmltools to construct interactive HTML
elements (e.g., buttons, articles) for each publication, and optionally writes markdown files
with frontmatter for further processing."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">c2z4uni</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.0.9016</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/oeysan/c2z4uni/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create HTML and Metadata Files from Cristin Data for Web Display</h1>
    <small class="dont-index">Source: <a href="https://github.com/oeysan/c2z4uni/blob/main/R/cristin_web.R" class="external-link"><code>R/cristin_web.R</code></a></small>
    <div class="hidden name"><code>CristinWeb.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function processes monthly Cristin data to generate HTML content
and metadata files for web display. It uses <code>htmltools</code> to construct interactive HTML
elements (e.g., buttons, articles) for each publication, and optionally writes markdown files
with frontmatter for further processing.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">CristinWeb</span><span class="op">(</span></span>
<span>  <span class="va">monthlies</span>,</span>
<span>  sdg.data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sdg.path <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  archive.url <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  local.storage <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  user.cards <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  md.path <span class="op">=</span> <span class="st">""</span>,</span>
<span>  md.save <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  use.multisession <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  min.multisession <span class="op">=</span> <span class="fl">25</span>,</span>
<span>  n.workers <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  handler <span class="op">=</span> <span class="st">"cli"</span>,</span>
<span>  restore.defaults <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  full.update <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  lang <span class="op">=</span> <span class="st">"nn"</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  log <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-monthlies">monthlies<a class="anchor" aria-label="anchor" href="#arg-monthlies"></a></dt>
<dd><p>Data containing monthly information from Cristin.</p></dd>


<dt id="arg-sdg-data">sdg.data<a class="anchor" aria-label="anchor" href="#arg-sdg-data"></a></dt>
<dd><p>Data containing information about Sustainable Development Goals (SDGs). Default is <code>NULL</code>.</p></dd>


<dt id="arg-sdg-path">sdg.path<a class="anchor" aria-label="anchor" href="#arg-sdg-path"></a></dt>
<dd><p>Path to SDG images. Default is <code>NULL</code>.</p></dd>


<dt id="arg-archive-url">archive.url<a class="anchor" aria-label="anchor" href="#arg-archive-url"></a></dt>
<dd><p>Relative URL to the archive. Default is <code>NULL</code>.</p></dd>


<dt id="arg-local-storage">local.storage<a class="anchor" aria-label="anchor" href="#arg-local-storage"></a></dt>
<dd><p>Path to the local storage directory. Default is <code>NULL</code>.</p></dd>


<dt id="arg-user-cards">user.cards<a class="anchor" aria-label="anchor" href="#arg-user-cards"></a></dt>
<dd><p>Logical, indicating whether to update user information from INN. Default is <code>TRUE</code>.</p></dd>


<dt id="arg-md-path">md.path<a class="anchor" aria-label="anchor" href="#arg-md-path"></a></dt>
<dd><p>Path to output markdown files. Default is an empty string (current directory).</p></dd>


<dt id="arg-md-save">md.save<a class="anchor" aria-label="anchor" href="#arg-md-save"></a></dt>
<dd><p>Logical, indicating whether to save the markdown files to disk. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-use-multisession">use.multisession<a class="anchor" aria-label="anchor" href="#arg-use-multisession"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, parallel processing using multisession is employed;
otherwise, processing is sequential. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-min-multisession">min.multisession<a class="anchor" aria-label="anchor" href="#arg-min-multisession"></a></dt>
<dd><p>Minimum number of results for using multisession. Default is <code>25</code>.</p></dd>


<dt id="arg-n-workers">n.workers<a class="anchor" aria-label="anchor" href="#arg-n-workers"></a></dt>
<dd><p>Optional integer for the number of workers to be used in multisession mode.
If <code>NULL</code>, it defaults to the number of available cores minus one (with a minimum of one).</p></dd>


<dt id="arg-handler">handler<a class="anchor" aria-label="anchor" href="#arg-handler"></a></dt>
<dd><p>The progress handler to be used by the <code>progressr</code> package. Default is <code>"cli"</code>.</p></dd>


<dt id="arg-restore-defaults">restore.defaults<a class="anchor" aria-label="anchor" href="#arg-restore-defaults"></a></dt>
<dd><p>Logical. If <code>TRUE</code>, the current <code>future</code> plan is saved and restored upon exit.
Default is <code>FALSE</code>.</p></dd>


<dt id="arg-full-update">full.update<a class="anchor" aria-label="anchor" href="#arg-full-update"></a></dt>
<dd><p>Logical, indicating whether to perform a full update of user information from INN.
Default is <code>FALSE</code>.</p></dd>


<dt id="arg-lang">lang<a class="anchor" aria-label="anchor" href="#arg-lang"></a></dt>
<dd><p>Language for localization ("nb", "nn", "no", or "en"). Defaults to <code>"nn"</code>.
If <code>lang</code> is set to <code>"no"</code>, it is internally converted to <code>"nn"</code>. Any language not in
<code>c("nb", "nn", "no")</code> is set to <code>"en"</code>.</p></dd>


<dt id="arg-silent">silent<a class="anchor" aria-label="anchor" href="#arg-silent"></a></dt>
<dd><p>Logical, indicating whether to suppress log messages. Default is <code>FALSE</code>.</p></dd>


<dt id="arg-log">log<a class="anchor" aria-label="anchor" href="#arg-log"></a></dt>
<dd><p>List to store log messages. Default is an empty list.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A list containing two elements:</p>
<dl><dt>results</dt>
<dd><p>A tibble with metadata and HTML content (as generated by <code>htmltools</code>) for each publication.</p></dd>

<dt>log</dt>
<dd><p>A log of processing messages.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function is typically used with <code>CristinMonthly</code> to convert monthly publication data
into HTML components and markdown files with frontmatter metadata. The function leverages <code>htmltools</code>
to programmatically build HTML elements such as articles and buttons for links to additional publication information.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span>  <span class="co"># Create monthlies for unit 209.5.10.0</span></span></span>
<span class="r-in"><span>  <span class="va">example</span> <span class="op">&lt;-</span> <span class="fu"><a href="CristinMonthly.html">CristinMonthly</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">c2z</span><span class="fu">::</span><span class="fu"><a href="https://oeysan.github.io/c2z/reference/Zotero.html" class="external-link">Zotero</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      id <span class="op">=</span> <span class="st">"4827927"</span>,</span></span>
<span class="r-in"><span>      api <span class="op">=</span> <span class="st">"Io1bwAiOjB1jPgUNegjJhJxF"</span>,</span></span>
<span class="r-in"><span>      user <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>    <span class="op">)</span>,</span></span>
<span class="r-in"><span>    unit.id <span class="op">=</span> <span class="st">"209.5.10.0"</span>,</span></span>
<span class="r-in"><span>    start.date <span class="op">=</span> <span class="st">"2023-07"</span>,</span></span>
<span class="r-in"><span>    post <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    silent <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>    use.citeproc <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in if (count == 1) singularis else pluralis:</span> argument is of length zero</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Generate HTML and markdown files</span></span></span>
<span class="r-in"><span>  <span class="va">example.web</span> <span class="op">&lt;-</span> <span class="fu">CristinWeb</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="va">example</span><span class="op">$</span><span class="va">monthlies</span>,</span></span>
<span class="r-in"><span>    user.cards <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in example$monthlies:</span> object of type 'closure' is not subsettable</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="co"># Print the three first publication titles (if any)</span></span></span>
<span class="r-in"><span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">example</span><span class="op">$</span><span class="va">monthlies</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="va">example</span><span class="op">$</span><span class="va">monthlies</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>      <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">title</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">3</span>, width <span class="op">=</span> <span class="fl">80</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in example$monthlies:</span> object of type 'closure' is not subsettable</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Øystein Olav Skaar.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

